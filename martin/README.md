# üõå Proyecto Integrador: An√°lisis de Patrones de Sue√±o en Estudiantes 

## Introducci√≥n 

Este proyecto forma parte del **bootcamp de an√°lisis de datos en Unicorn Academy** üéì. Aqu√≠ exploraremos c√≥mo los patrones de sue√±o afectan el rendimiento acad√©mico, utilizando herramientas como SQL para el an√°lisis y GitHub para la documentaci√≥n.  

## üöÄ Objetivos  

- **Organizar y estructurar la base de datos:**
Crear un esquema bien estructurado para almacenar los datos relacionados con los patrones de sue√±o de los estudiantes. Esto incluye dividir la informaci√≥n en varias tablas para facilitar el an√°lisis y mejorar el rendimiento de las consultas.

- **Aplicar las mejores pr√°cticas de SQL:**
Utilizar comandos SQL eficientes y organizar el c√≥digo en archivos espec√≠ficos para cada paso (selecci√≥n del esquema, creaci√≥n de tablas, popular las tablas, verificaci√≥n de datos y limpieza).

- **Facilitar el an√°lisis de datos:**
Organizar las tablas de forma que sea f√°cil realizar an√°lisis y visualizaciones en herramientas externas. Utilizar las relaciones entre las tablas para facilitar las consultas complejas, demostrando un uso avanzado de SQL, incluyendo el uso de JOIN.

- **Limpieza de datos:**
Detectar y manejar los valores nulos, duplicados y cualquier inconsistencia en los datos, utilizando t√©cnicas de limpieza para asegurar que los datos sean precisos y confiables para el an√°lisis.

- **Dise√±ar vistas SQL avanzadas:**
La finalidad es analizar y resumir datos clave, como h√°bitos de sue√±o, actividad f√≠sica y tiempo frente a pantallas, permitiendo una interpretaci√≥n r√°pida y eficiente de los resultados.

- **Implementar stored procedures personalizados:**
Automatizar consultas complejas, generar reportes din√°micos y comparar datos, optimizando el an√°lisis y destacando habilidades avanzadas en SQL.

- **Documentar y explicar el proceso:**
Documentar cada paso del proyecto de forma detallada, explicando el prop√≥sito de cada consulta SQL, para que el proyecto sea f√°cilmente entendible para otros usuarios. Adem√°s, presentar los scripts de SQL bien organizados en la carpeta sql del repositorio.
 
- **Demostrar habilidades en SQL:**
Mostrar el dominio de funciones avanzadas de SQL (como JOIN, GROUP BY, HAVING, etc.) y la capacidad para manejar grandes cantidades de datos de forma eficiente.

- **Crear un repositorio bien organizado:**
Mantener un repositorio de GitHub limpio y bien estructurado con una documentaci√≥n clara y accesible. Proporcionar un √≠ndice interactivo al principio del README.md para facilitar la navegaci√≥n por los scripts SQL.

- **Optimizar la base de datos para futuras visualizaciones:**
Organizar las tablas de forma que los datos sean f√°cilmente exportables a herramientas de visualizaci√≥n de datos, como Power BI o Tableau, permitiendo un an√°lisis visual efectivo en el futuro.
---
## Configuraci√≥n del proyecto ‚öôÔ∏è

### Acceso a los datos crudos 

**Haz Click:** [sleeping_patterns.csv](sql/raw-data/sleeping_patterns.csv)

### Acceso al archivo final de sql

**Haz Click:** [archivo-final.sql](sql/archivo-final/archivo-final.sql) 

 - Paso 1: descarga el archivo del hyeperlink
 - Paso 2: abre el archivo utilizando el server de sql a elecci√≥n
 - Paso 3: ejecuta el c√≥digo

**Resultado:**
- Luego de seguis los pasos 1, 2 y 3, tendr√°s es esquma creado, asi como las tablas, vistas y stored procedures.

#### El paso a paso de como llegue al [archivo-final.sql](sql/archivo-final/archivo-final.sql) se explica en el abajo üëá
---

## √çndice del Proyecto üëá


1. [Introducci√≥n](#introducci√≥n)  
2. [üöÄ Objetivos](#-objetivos)  
3. [üìù Gu√≠a paso a paso](#-gu√≠a-paso-a-paso)  
   - [üî® Paso 1: Configuraci√≥n de la base de datos](#-paso-1-configuraci√≥n-de-la-base-de-datos)  
   - [Paso 2: Creacion de tablas](#paso-2-creacion-de-tablas)
   - [üì§ Paso 3: Poblar las tablas](#-paso-3-poblar-las-tablas)  
   - [üìä Paso 4: Verificar la estructura y datos](#-paso-4-verificar-la-estructura-y-datos)  
   - [üßπ Paso 5: Limpieza de datos](#-paso-5-limpieza-de-datos)  
4. [Vistas SQL](#vistas-sql)
5. [Creaci√≥n de Stored Procedures para An√°lisis de Datos](#creacion-de-stored-procedures-para-analisis-de-datos)
6. [üåü Conclusiones Generales](#-conclusiones-generales)  


---

## üìù Gu√≠a paso a paso  

### üî® **Paso 1: Configuraci√≥n de la base de datos** 
Incluye los pasos iniciales para crear la base de datos o esquema, cargar los datos al esquema y asegurarte de trabajar en el esquema correcto.

- **üóÇÔ∏è Crear el Esquema**

Ejecuta el siguiente c√≥digo SQL para crear un esquema llamado sleeping_pattern y una tabla student_sleep_patterns

**C√≥digo SQL:**  [crear-esquema.sql](sql/crear-esquema.sql)

- **üì• Cargar los Datos desde el CSV**

1. Ubica el archivo CSV: Aseg√∫rate de que sleeping_patterns.csv est√© en tu sistema o servidor.
2. Carga los datos usando SQL: Si est√°s utilizando herramientas como MySQL Workbench, pgAdmin o cualquier sistema de gesti√≥n de bases de datos compatible, puedes usar el siguiente comando para cargar el archivo:

 **C√≥digo SQL:** [cargar-datos-esquema.sql](sql/cargar-datos-esquema.sql)
   
3. Verifica la Importaci√≥n:
```
SELECT * FROM sleeping_pattern.student_sleep_patterns LIMIT 10;
```


- Seleccionar el esquema correcto

**C√≥digo SQL:** [1-seleccionar-esquema.sql](sql/1-seleccionar-esquema.sql)

### Explicaci√≥n:
Esto asegura que cualquier tabla que creemos o modifiquemos se haga en la base de datos sleeping_patterns.


---



### Paso 2: Creacion de tablas
Aqu√≠ explicamos c√≥mo se separaron los datos en tres tablas: `students`, `sleep_patterns` y `lifestyle`.
Para mejorar la organizaci√≥n y el an√°lisis de los datos, dividimos la tabla original `student_sleep_patterns` en tres tablas relacionadas:

1. **`students`**: Contiene informaci√≥n b√°sica de los estudiantes.
2. **`sleep_patterns`**: Incluye datos relacionados con los h√°bitos de sue√±o.
3. **`lifestyle`**: Registra los h√°bitos y actividades de los estudiantes.

**C√≥digo SQL:**

[2-creaci√≥n-de-tablas.sql](sql/2-creaci√≥n-de-tablas.sql)

### ‚úçÔ∏è Explicaci√≥n:

- **Normalizaci√≥n de datos:** Dividimos la tabla principal en entidades separadas para evitar redundancias.
- **Claves primarias y for√°neas:** Establecimos relaciones entre las tablas mediante claves primarias `(Student_ID)` y for√°neas `(Student_ID en las tablas relacionadas)`.
- **Relaciones:** Ahora es posible combinar estas tablas mediante consultas `JOIN`.


---

### üì§ Paso 3: Poblar las tablas
Explicamos c√≥mo transferimos los datos de la tabla original `student_sleep_patterns` a las nuevas tablas.
Transferimos los datos de la tabla original a las nuevas tablas utilizando consultas `INSERT INTO ... SELECT`.

**C√≥digo SQL:**

[3-popular-tablas.sql](sql/3-popular-tablas.sql)

### ‚úçÔ∏è Explicaci√≥n:

- **Selecci√≥n de datos:** Usamos `DISTINCT` para evitar duplicados en la tabla `students`
- **Divisi√≥n l√≥gica:** Los datos se asignan a la tabla correspondiente seg√∫n su prop√≥sito.
- **Validaci√≥n:** Cada tabla ahora contiene √∫nicamente los datos relacionados con su entidad.

---

### üìä Paso 4: Verificar la estructura y datos
Aqu√≠ mostramos c√≥mo verificar que las tablas se hayan creado correctamente y est√©n bien pobladas.
Despu√©s de crear y poblar las tablas, verificamos que todo est√© correcto.

**C√≥digo SQL:**

[4-verificaci√≥n-tablas.sql](sql/4-verificaci√≥n-tablas.sql)

### ‚úçÔ∏è Explicaci√≥n:

- **`SHOW TABLES`**: Muestra todas las tablas del esquema.
- **`SELECT * ... LIMIT`**: Permite visualizar una muestra de los datos en cada tabla.

---

### üßπ Paso 5: Limpieza de datos
La limpieza de datos es un paso esencial en cualquier proyecto de an√°lisis. Aqu√≠ identificaremos y resolveremos problemas comunes como duplicados, valores nulos y posibles inconsistencias en las tablas.

#### üîç Identificaci√≥n de duplicados
#### üîé Detecci√≥n de valores nulos

**C√≥digo SQL:**

[5-limpieza-de-datos.sql](sql/5-limpieza-de-datos.sql)

### ‚úçÔ∏è Explicaci√≥n:

- COUNT(*): Cuenta las filas por Student_ID.
- HAVING COUNT(*) > 1: Filtra estudiantes con m√°s de un registro, lo que indica duplicados.
- IS NULL: Identifica registros con valores faltantes en las columnas clave de cada tabla.
- Revisi√≥n por tabla: Analizamos cada tabla individualmente para detectar problemas espec√≠ficos.
- Reemplazo con promedios: Para columnas num√©ricas como Age y Sleep_Duration, utilizamos el promedio.
- Reemplazo con valores predeterminados: Para columnas como Study_Hours, asignamos un valor predeterminado, como 0, si faltan datos.



### üß™ Consistencia de datos 

Por √∫ltimo, verificamos si los datos son consistentes entre las tablas, por ejemplo, si todos los Student_ID de las tablas relacionadas existen en la tabla principal students.

- **Verificar consistencia de Student_ID entre tablas**
```
SELECT sp.Student_ID
FROM sleeping_patterns.sleep_patterns sp
LEFT JOIN sleeping_patterns.students s ON sp.Student_ID = s.Student_ID
WHERE s.Student_ID IS NULL;
```

- **L√≥gica similar para la tabla `lifestyle`**
```
SELECT ls.Student_ID
FROM sleeping_patterns.lifestyle ls
LEFT JOIN sleeping_patterns.students s ON ls.Student_ID = s.Student_ID
WHERE s.Student_ID IS NULL;
```
### ‚úçÔ∏è Explicaci√≥n:

- LEFT JOIN: Conectamos las tablas relacionadas con la tabla principal.
- WHERE ... IS NULL: Detecta IDs que no tienen correspondencia, lo que podr√≠a indicar errores en las relaciones.

### ‚ú® Resultado final de la limpieza de datos
Con estos pasos de limpieza, hemos:

----


- Identificado y eliminado duplicados.
- Detectado y resuelto valores nulos.
- Asegurado consistencia en las relaciones entre tablas.
- Este proceso asegura que los datos est√©n limpios, bien estructurados y listos para an√°lisis y visualizaciones en Power BI. üöÄ

---


## Vistas SQL 
### üåü Destacados de esta secci√≥n

#### 1. üîé An√°lisis avanzado con SQL

- Creaci√≥n de 11 vistas optimizadas para extraer informaci√≥n clave.
- Uso de funciones de agregaci√≥n, casos condicionales y l√≥gica de agrupaci√≥n.

#### 2. üìä Conexi√≥n entre patrones de sue√±o y estilo de vida

- An√°lisis cruzado para identificar correlaciones entre actividad f√≠sica, consumo de cafe√≠na y calidad del sue√±o.

#### 3. üìà Insights clave

- Identificaci√≥n de estudiantes con h√°bitos extremos.
- Cumplimiento de las recomendaciones de sue√±o por grupo de edad.
- An√°lisis del impacto del tiempo de pantalla en los estudios.

### üóÇÔ∏è Vistas SQL

#### 1. [view-AverageSleepDuration.sql](sql/vistas/view-AverageSleepDuration.sql)

üìå Prop√≥sito: Calcular la duraci√≥n promedio del sue√±o entre semana y fines de semana.

üí° Resultados Clave:
avg_weekday_sleep: 6.8 horas
avg_weekend_sleep: 7.5 horas

#### 2. [view-AvgLifestyleStats.sql](sql/vistas/view-AvgLifestyleStats.sql)

üìå Prop√≥sito: Promedios de estudio, tiempo de pantalla, consumo de cafe√≠na y actividad f√≠sica.

üí° Resultados Clave:
avg_study_hours: 4.3 horas
avg_screen_time: 5.2 horas
avg_caffeine_intake: 1.8 tazas
avg_physical_activity: 3.5 sesiones

#### 3. [view-BalancedHabitsRanking.sql](sql/vistas/view-BalancedHabitsRanking.sql)

üìå Prop√≥sito: Identificar estudiantes con h√°bitos m√°s equilibrados seg√∫n una m√©trica personalizada.

#### üìú Vistas Adicionales
Nombre de la Vista y su	prop√≥sito
- [view-ExtremeHabits.sql](sql/vistas/view-ExtremeHabits.sql)	|Identificar estudiantes con h√°bitos extremos.
- [view-PhysicalActivityVsCaffeine.sql](sql/vistas/view-PhysicalActivityVsCaffeine.sql)	| Relaci√≥n entre actividad f√≠sica y consumo de cafe√≠na.
- [view-RecommendedSleepCompliance.sql](sql/vistas/view-RecommendedSleepCompliance.sql)	| Porcentaje de estudiantes que cumplen con el sue√±o recomendado.
- [view-SleepComparison.sql](sql/vistas/view-SleepComparison.sql)	| Comparaci√≥n de sue√±o entre semana y fines de semana.
- [view-SleepStatsByAge.sql](sql/vistas/view-SleepStatsByAge.sql)	| Estad√≠sticas del sue√±o por grupo de edad.
- [view-StudyVsScreenTime.sql](sql/vistas/view-StudyVsScreenTime.sql)	| An√°lisis del impacto del tiempo de pantalla en horas de estudio.
- [view-TotalStudents.sql](sql/vistas/view-TotalStudents.sql)	| Contar el n√∫mero total de estudiantes analizados.

---


## üõ†Ô∏è Creaci√≥n de Stored Procedures para An√°lisis de Datos

### üìã ¬øQu√© es un Stored Procedure?

Un Stored Procedure es un conjunto de instrucciones SQL predefinidas que se almacenan en el servidor de base de datos.
‚úÖ Ventajas:

- Automatiza an√°lisis repetitivos.
- Mejora la organizaci√≥n del c√≥digo SQL.
- Permite realizar consultas parametrizadas para personalizar resultados.

### üóÇÔ∏è Stored Procedures Implementados

**1Ô∏è‚É£ sp_GetStudentStatistics**
üìå Prop√≥sito: Generar estad√≠sticas resumidas (promedios) para un grupo espec√≠fico de estudiantes seg√∫n rango de edad y g√©nero.

**C√≥digo SQL:**

[sp_CompareLifestyleWithAverage.sql](sql/stored-procedures/sp_CompareLifestyleWithAverage.sql)

**üñ•Ô∏è Uso:**
```
CALL sp_GetStudentStatistics(18, 25, 'F'); -- Mujeres entre 18 y 25 a√±os
CALL sp_GetStudentStatistics(20, 30, 'ALL'); -- Todos los g√©neros entre 20 y 30 a√±os
```
**üìä Resultado:**

![image](https://github.com/user-attachments/assets/e94c9f6b-4591-4df2-a994-57e7934065f2)

**2Ô∏è‚É£ sp_GetExtremeHabits**
üìå Prop√≥sito: Identificar estudiantes con h√°bitos extremos, como horas de sue√±o insuficientes, exceso de tiempo frente a la pantalla o alta ingesta de cafe√≠na.

**C√≥digo SQL:**

[sp_GetExtremeHabits.sql](sql/stored-procedures/sp_GetExtremeHabits.sql)

**üñ•Ô∏è Uso:**
```
CALL sp_GetExtremeHabits();
```
**üìä Resultado:**

![image](https://github.com/user-attachments/assets/ea3afa2b-dba1-472e-bcf7-37236176032e)

**3Ô∏è‚É£ sp_CompareLifestyleWithAverage**
üìå Prop√≥sito: Comparar los h√°bitos de un estudiante espec√≠fico con los promedios generales de todos los estudiantes.

**C√≥digo SQL:**

[sp_GetHealthyHabitsRanking.sql](sql/stored-procedures/sp_GetHealthyHabitsRanking.sql)

**üñ•Ô∏è Uso:**
```
CALL sp_CompareLifestyleWithAverage(123); -- Compara al estudiante con ID 123
```
**üìä Resultado:**

![image](https://github.com/user-attachments/assets/72b7f3e2-7306-4ae0-ab17-88cacc8a62ce)

### üöÄ Beneficios para el Proyecto
- üîç Automatizaci√≥n de An√°lisis: Los procedimientos almacenados agilizan la generaci√≥n de reportes y permiten responder preguntas clave con solo unos comandos.
- üìä Flexibilidad en Consultas: Puedes personalizar el an√°lisis mediante par√°metros (edad, g√©nero, ID).
- ‚ö° Optimizaci√≥n: Reutilizas las mismas l√≥gicas complejas en m√∫ltiples consultas sin duplicar c√≥digo.
- üèÜ Diferenciaci√≥n: El uso de stored procedures muestra un manejo avanzado de SQL, destacando tu habilidad para manejar proyectos reales.

  # Archivo final del esquema SQL:

  [sleeping_patterns.sql](sql/archivo-final/sleeping_patterns.sql)

## Conclusiones Generales üåü

#### 1. Promedio de sue√±oüõåüåô:

- El promedio de sue√±o de los estudiantes es 6.47 horas, lo que est√° por debajo del rango recomendado de 7-9 horas diarias seg√∫n expertos en salud.
- Esto podr√≠a sugerir una tendencia general de d√©ficit de sue√±o en los estudiantes, lo que puede impactar negativamente en su rendimiento acad√©mico y bienestar general.

#### 2.Estilo de vida üïíüö∂‚Äç‚ôÄÔ∏è

- Horas de estudio: Los estudiantes dedican un promedio de 5.98 horas diarias al estudio, lo que refleja un compromiso significativo con sus responsabilidades acad√©micas.
- Tiempo de pantalla: El tiempo promedio de pantalla es de 2.53 horas, que aunque moderado, podr√≠a estar relacionado con una reducci√≥n en la calidad de sue√±o debido a la exposici√≥n a dispositivos electr√≥nicos.
- Consumo de cafe√≠na: El consumo promedio de cafe√≠na es de 2.46 tazas por d√≠a, lo que puede estar contribuyendo a la interrupci√≥n del sue√±o, especialmente si se consume en las horas cercanas al descanso.
- Actividad f√≠sica: El promedio de actividad f√≠sica es de 62.34 minutos diarios, lo que sugiere que algunos estudiantes mantienen h√°bitos saludables en este aspecto. Sin embargo, ser√≠a interesante analizar si hay correlaci√≥n entre la actividad f√≠sica y la calidad del sue√±o.

#### 3.Cumplimiento de recomendaciones de sue√±o üéØ 

- Solo 42.8% de los estudiantes cumplen con las recomendaciones de sue√±o diario. Esto resalta la necesidad de promover una mejor higiene del sue√±o y concienciar sobre su importancia para la salud y el rendimiento acad√©mico.

#### 4. Rango de sue√±o registrado üìöüò¥

- El rango de sue√±o var√≠a entre 4 y 9 horas, con un promedio de 6.47 horas.
- La cantidad m√≠nima registrada de 4 horas es alarmante y puede estar relacionada con un estilo de vida extremo, como largas horas de estudio o tiempo excesivo frente a pantallas.


## Posibles recomendaciones

#### 1. Mejorar la higiene del sue√±o
- Fomentar horarios regulares para dormir y despertarse, incluso los fines de semana.
- Reducir el tiempo frente a pantallas antes de dormir y limitar el consumo de cafe√≠na por las tardes.

#### 2. Equilibrar estudio y descanso
- Aunque los estudiantes dedican un promedio razonable a estudiar (5.98 horas), podr√≠an beneficiarse de estrategias de gesti√≥n del tiempo para mantener un equilibrio saludable entre sus responsabilidades y el descanso.

#### 3. Promoci√≥n de actividad f√≠sica

- Los estudiantes que realizan m√°s de 60 minutos de actividad f√≠sica diaria podr√≠an estar mejorando su calidad de sue√±o, lo que refuerza la importancia de incorporar ejercicio regular en sus rutinas.

## Reflexi√≥n t√©cnica üõ†Ô∏èüí°

#### Impacto de las herramientas SQL üóÑÔ∏èüîç

- La creaci√≥n de vistas SQL y stored procedures permiti√≥ transformar datos crudos en informaci√≥n procesable y relevante.
- Con vistas como SleepComparison üïí y BalancedHabitsRanking üèÜ, fue posible identificar patrones clave de comportamiento y h√°bitos estudiantiles.

#### Optimizaci√≥n y reutilizaci√≥n üìà‚ôªÔ∏è

- Las vistas y procedimientos almacenados no solo facilitaron el an√°lisis, sino que tambi√©n hicieron el proceso m√°s eficiente al evitar c√°lculos repetitivos.
- Estas herramientas pueden ser reutilizadas f√°cilmente en proyectos futuros o ampliadas para incorporar nuevos datos.

#### Colaboraci√≥n y presentaci√≥n üßë‚Äçü§ù‚Äçüßëüìä

- Al estructurar el proyecto en un esquema organizado y exportable, el an√°lisis es accesible para otros colaboradores, fomentando el trabajo en equipo.
- El uso de herramientas como MySQL Workbench y la exportaci√≥n de un esquema completo üåêüì¶ asegura que el proyecto sea f√°cil de compartir e integrar en otras plataformas.

#### Valor a√±adido para el portfolio üíº‚ú®

- Incorporar an√°lisis avanzados como estad√≠sticas, vistas comparativas y stored procedures muestra un alto nivel de conocimiento t√©cnico y comprensi√≥n de los datos.
- Este enfoque resalta no solo la capacidad para usar SQL, sino tambi√©n para aplicar pensamiento anal√≠tico y resolver problemas reales üß†üîó.

#### Futuras extensiones üîÆüöÄ

- Integrar estas vistas y procedimientos con herramientas de visualizaci√≥n como Tableau üìä o Power BI üìà puede mejorar la comunicaci√≥n de resultados y hacerlos m√°s impactantes.
- Expandir el an√°lisis a otras √°reas, como el rendimiento acad√©mico en relaci√≥n con el sue√±o, podr√≠a proporcionar un contexto m√°s rico y significativo.
